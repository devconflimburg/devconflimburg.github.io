<template x-component="register">
    <div>
    <div class="bg-light" x-show="$store.registrationOpen" x-cloak x-transition.delay.500ms>
        <div class="row">
            <div class="col-2"></div>
            <div class="col-8">
                <div class="table-responsive">
                    <table class="table table-sm" x-show="$store.trace.length != 0" x-cloak x-transition>
                        <thead>
                        <tr>
                            <th scope="col">Timestamp</th>
                            <th scope="col">Command/Event</th>
                            <th scope="col">Status</th>
                            <th scope="col">Message</th>
                        </tr>
                        </thead>
                        <tbody>
                        <template x-for="message in $store.trace">
                            <tr x-transition>
                                <th scope="row" x-html="message.timestamp.replace('Z','').replace('T',' ')"></th>
                                <td x-html="message.command != '' ? message.command : message.event"></td>
                                <td x-html="message.status"></td>
                                <td x-html="message.message"></td>
                            </tr>
                        </template>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-2"></div>
        </div>
    </div>
    <div class="py-5 bg-light" x-show="$store.registrationOpen"
         x-import="commands/Conference/RegistrationManager/registerVisitor"
         x-cloak x-transition.delay.500ms>
        <script src="/js/inschrijven.js"></script>
        <div class="container px-5 my-5">
            <div class="row gx-5 justify-content-center">
                <div class="col-lg-10 col-xl-7">
                    <div class="text-center">
                        <div class="fs-4 mb-4 fst-italic">
                            <h2 id="register">Schrijf je in voor devConf <span x-text="$store.next.Element.get.edition.year"></span>!</h2>
                            <ui-register-visitor-conference-registration-manager command="register"></ui-register-visitor-conference-registration-manager>
                            <form x-data="{ form : $persist({
                                email: '',
                                firstName: '',
                                lastName: '',
                                year: '',
                                breakouts:[]
                             })}"
                                  x-effect="form.year = $store.next.Element.get.edition.year;"
                                  x-init="form.year = $store.next.Element.get.edition.year">
                                <div class="mb-3">
                                    <label for="exampleInputEmail1" class="form-label">Email</label>
                                    <input x-model="form.email" type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                                </div>
                                <div class="mb-3">
                                    <label for="exampleInputPassword1" class="form-label">Voornaam</label>
                                    <input x-model="form.firstName" type="text" class="form-control" id="exampleInputPassword1">
                                </div>
                                <div class="mb-3">
                                    <label for="exampleInputPassword2" class="form-label">Achternaam</label>
                                    <input x-model="form.lastName" type="text" class="form-control" id="exampleInputPassword2">
                                </div>
                                <button type="button"
                                        x-data="{submitted:false}"
                                        x-show="!submitted" x-transition
                                        @click="$store.mutation.send('register',form);submitted=true;" class="btn btn-primary">Schrijf je in</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</template>