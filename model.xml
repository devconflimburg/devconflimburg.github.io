<?xml version="1.0" encoding="utf-8"?>
<draftsman project-name="ManagementSystem" xmlns="https://tracepaper.draftsman.io">
	<global>
		<pattern name="Year" regex="^(?:20)\d{2}$"></pattern>
		<pattern name="ProgramItemId" regex="^(?:20)\d{2}-\d{1,2}$"></pattern>
		<pattern name="Email" regex="^(.+)@(.+)$"></pattern>
		<pattern name="TimeNotation" regex="^\d{2}:\d{2}$"></pattern>
		<pattern name="Date" regex="^\d{2}-\d{2}-(?:20)\d{2}$"></pattern>
	</global>
	<events>
		<event name="ResendVerificationTicketRequested" authorization="role" role="administrator" type="ActorEvent" graphql-name="resendVerification" graphql-namespace="Ticket">
			<field name="firstName" type="String"></field>
			<field name="lastName" type="String"></field>
			<field name="year" type="String" pattern="{{Year}}"></field>
			<field name="email" type="String" pattern="{{Email}}"></field>
			<field name="control" type="String" auto-fill="uuid"></field>
			<field name="ticketId" type="String"></field>
		</event>
		<event graphql-namespace="Ticket" graphql-name="verify" name="VerifyTicketRequested" authorization="anonymous" type="ActorEvent">
			<field name="ticketId" type="String"></field>
			<field name="control" type="String"></field>
		</event>
		<event name="UpdateWebSiteElementRequested" authorization="authenticated" type="ActorEvent" graphql-name="update" graphql-namespace="WebSite.Element">
			<field name="name" type="String"></field>
			<field name="content" type="String"></field>
		</event>
		<event graphql-namespace="Ticket" graphql-name="handleLost" name="HandleLostTicketRequested" authorization="anonymous" type="ActorEvent">
			<field name="ticketId" type="String"></field>
		</event>
		<event name="CreateConferenceTalkProposalRequested" authorization="anonymous" type="ActorEvent" graphql-name="create" graphql-namespace="Conference.TalkProposal">
			<field name="difficultyLevel" type="String"></field>
			<field name="name" type="String"></field>
			<field name="abstract" type="String"></field>
			<field name="biography" type="String"></field>
			<field name="id" type="String"></field>
			<field name="title" type="String"></field>
			<field name="email" type="String"></field>
		</event>
		<event name="ConfigureConferenceRegistrationManagerRequested" authorization="role" role="administrator" type="ActorEvent" graphql-name="configure" graphql-namespace="Conference.RegistrationManager">
			<field name="closeDate" type="String" pattern="{{Date}}"></field>
			<field name="year" type="String" pattern="{{Year}}"></field>
			<field name="openDate" type="String" pattern="{{Date}}"></field>
			<field name="maxVisitors" type="Int"></field>
		</event>
		<event name="AddProgramItemConferenceRequested" authorization="role" role="administrator" type="ActorEvent" graphql-name="addProgramItem" graphql-namespace="Conference">
			<field name="summary" type="String"></field>
			<field name="duration" type="Int"></field>
			<field name="year" type="String" pattern="{{Year}}"></field>
			<field name="speaker" type="String"></field>
			<field name="startTime" type="String" pattern="{{TimeNotation}}"></field>
			<field name="title" type="String"></field>
			<field name="room" type="String"></field>
			<field name="id" type="String"></field>
		</event>
		<event name="RegisterVisitorConferenceRegistrationManagerRequested" authorization="anonymous" type="ActorEvent" graphql-name="registerVisitor" graphql-namespace="Conference.RegistrationManager">
			<field name="firstName" type="String"></field>
			<field name="lastName" type="String"></field>
			<field name="year" type="String" pattern="{{Year}}"></field>
			<field name="email" type="String" pattern="{{Email}}"></field>
			<field name="control" type="String" auto-fill="uuid"></field>
			<nested-object name="breakouts">
				<field name="id" type="String"></field>
			</nested-object>
		</event>
		<event graphql-namespace="Ticket" graphql-name="redeem" name="RedeemTicketRequested" authorization="role" type="ActorEvent" role="administrator">
			<field name="ticketId" type="String"></field>
		</event>
		<event name="InitializeEditionConferenceRequested" authorization="role" role="administrator" type="ActorEvent" graphql-name="initializeEdition" graphql-namespace="Conference">
			<field name="date" type="String" pattern="{{Date}}"></field>
			<field name="year" type="String" pattern="{{Year}}"></field>
			<field name="tagline" type="String"></field>
		</event>
		<event name="CreateWebSiteElementRequested" authorization="role" role="administrator" type="ActorEvent" graphql-name="create" graphql-namespace="WebSite.Element">
			<field name="name" type="String"></field>
			<field name="content" type="String"></field>
		</event>
		<event graphql-namespace="Ticket" graphql-name="resend" name="ResendTicketRequested" authorization="role" type="ActorEvent" role="administrator">
			<field name="ticketId" type="String"></field>
		</event>
		<event name="ConferenceProgramItemCreated" source="Conference.ProgramItem" type="DomainEvent">
			<field name="summary" type="String"></field>
			<field name="duration" type="Int"></field>
			<field name="year" type="String"></field>
			<field name="speaker" type="String"></field>
			<field name="startTime" type="String"></field>
			<field name="id" type="String"></field>
			<field name="endTime" type="String"></field>
			<field name="title" type="String"></field>
			<field name="room" type="String"></field>
		</event>
		<event name="ConferenceVisitorCreated" source="Conference.Visitor" type="DomainEvent">
			<field name="firstName" type="String"></field>
			<field name="lastName" type="String"></field>
			<field name="year" type="String"></field>
			<field name="ticketId" type="String"></field>
			<field name="email" type="String"></field>
		</event>
		<event name="ConferenceTicketCreated" source="Conference.Ticket" type="DomainEvent">
			<field name="year" type="String"></field>
			<field name="ticketId" type="String"></field>
			<field name="breakouts" type="String"></field>
			<field name="control" type="String"></field>
		</event>
		<event name="ConferenceTicketVerified" source="Conference.Ticket" type="DomainEvent">
			<field name="ticketId" type="String"></field>
			<field name="verified" type="Boolean" default="false"></field>
		</event>
		<event name="ConferenceTicketRedeemed" source="Conference.Ticket" type="DomainEvent">
			<field name="ticketId" type="String"></field>
			<field name="redeemed" type="Boolean" default="true"></field>
		</event>
		<event name="ConferenceTalkProposalCreated" source="Conference.TalkProposal" type="DomainEvent">
			<field name="difficultyLevel" type="String"></field>
			<field name="name" type="String"></field>
			<field name="abstract" type="String"></field>
			<field name="biography" type="String"></field>
			<field name="id" type="String"></field>
			<field name="title" type="String"></field>
			<field name="email" type="String"></field>
		</event>
		<event name="ConferenceEditionProgramItemAdded" source="Conference.Edition" type="DomainEvent">
			<field name="id" type="String"></field>
			<field name="title" type="String"></field>
			<field name="summary" type="String"></field>
			<field name="speaker" type="String"></field>
			<field name="room" type="String"></field>
			<field name="startTime" type="String"></field>
			<field name="duration" type="Int"></field>
			<field name="breakout" type="Boolean"></field>
			<field name="session" type="Int"></field>
		</event>
		<event name="ConferenceEditionInitialized" source="Conference.Edition" type="DomainEvent">
			<field name="date" type="String"></field>
			<field name="year" type="String"></field>
			<field name="tagline" type="String"></field>
		</event>
		<event name="ConferenceRegistrationManagerVisitorRegistered" source="Conference.RegistrationManager" type="DomainEvent">
			<field name="year" type="String"></field>
			<field name="ticketId" type="String"></field>
			<field name="firstName" type="String"></field>
			<field name="lastName" type="String"></field>
			<field name="email" type="String"></field>
			<field name="breakouts" type="String"></field>
			<field name="control" type="String"></field>
		</event>
		<event name="ConferenceRegistrationManagerUpdated" source="Conference.RegistrationManager" type="DomainEvent">
			<field name="closeDate" type="String"></field>
			<field name="openDate" type="String"></field>
			<field name="maxVisitors" type="Int"></field>
		</event>
		<event name="ConferenceRegistrationManagerInitialized" source="Conference.RegistrationManager" type="DomainEvent">
			<field name="closeDate" type="String"></field>
			<field name="openDate" type="String"></field>
			<field name="maxVisitors" type="Int"></field>
			<field name="year" type="String"></field>
		</event>
		<event name="WebSiteElementUpdated" source="WebSite.Element" type="DomainEvent">
			<field name="name" type="String"></field>
			<field name="content" type="String"></field>
		</event>
		<event name="WebSiteElementCreated" source="WebSite.Element" type="DomainEvent">
			<field name="name" type="String"></field>
			<field name="content" type="String"></field>
		</event>
	</events>
	<domain>
		<subdomain name="Conference">
			<aggregate name="ProgramItem" event-ttl="-1" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="summary" type="String"></field>
				<field name="duration" type="Int"></field>
				<field name="year" type="String"></field>
				<field name="speaker" type="String"></field>
				<field name="startTime" type="String"></field>
				<field name="id" type="String"></field>
				<field name="endTime" type="String"></field>
				<field name="title" type="String"></field>
				<field name="room" type="String"></field>
				<command name="Create" create-command="false">
					<trigger key-field="id" source="ConferenceEditionProgramItemAdded">
						<mapping value="id" target="id"></mapping>
						<mapping value="title" target="title"></mapping>
						<mapping value="summary" target="summary"></mapping>
						<mapping value="speaker" target="speaker"></mapping>
						<mapping value="room" target="room"></mapping>
						<mapping value="startTime" target="startTime"></mapping>
						<mapping value="duration" target="duration"></mapping>
					</trigger>
					<processor type="code" handler="calculate_end_time" file="lib/ProgrammaManagement.py" id="Ol0jE"></processor>
					<processor type="code" handler="decode_summary" file="lib/ProgrammaManagement.py" id="udsJt"></processor>
					<processor type="emit-event" ref="ConferenceProgramItemCreated" id="jXbas">
						<mapping target="summary" value="#flow.summary"></mapping>
						<mapping target="duration" value="#flow.duration"></mapping>
						<mapping target="year" value="#flow.year"></mapping>
						<mapping target="speaker" value="#flow.speaker"></mapping>
						<mapping target="startTime" value="#flow.startTime"></mapping>
						<mapping target="id" value="#flow.id"></mapping>
						<mapping target="endTime" value="#flow.endTime"></mapping>
						<mapping target="title" value="#flow.title"></mapping>
						<mapping target="room" value="#flow.room"></mapping>
					</processor>
					<test-case name="TimeOverflow" expected-processing-status="success" trigger-event="ConferenceEditionProgramItemAdded" user="systemuser">
						<input name="id" type="String" value="2024-1"></input>
						<input name="title" type="String" value="Test"></input>
						<input name="summary" type="String" value="Hello World!"></input>
						<input name="speaker" type="String" value="John Doe"></input>
						<input name="room" type="String" value="Forum"></input>
						<input name="startTime" type="String" value="09:45"></input>
						<input name="duration" type="Number" value="30"></input>
						<expected domain-event="ConferenceProgramItemCreated">
							<field name="summary" type="String" value="Hello World!"></field>
							<field name="endTime" type="String" value="10:15"></field>
						</expected>
					</test-case>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="ConferenceEditionProgramItemAdded" user="systemuser">
						<input name="id" type="String" value="2024-1"></input>
						<input name="title" type="String" value="Test"></input>
						<input name="summary" type="String" value="base64:SGVsbG8gV29ybGQh"></input>
						<input name="speaker" type="String" value="John Doe"></input>
						<input name="room" type="String" value="Forum"></input>
						<input name="startTime" type="String" value="09:00"></input>
						<input name="duration" type="Number" value="45"></input>
						<expected domain-event="ConferenceProgramItemCreated">
							<field name="summary" type="String" value="Hello World!"></field>
							<field name="endTime" type="String" value="09:45"></field>
						</expected>
					</test-case>
				</command>
				<event-handler on="ConferenceProgramItemCreated">
					<mapping value="summary" target="summary" operand="set"></mapping>
					<mapping value="duration" target="duration" operand="set"></mapping>
					<mapping value="year" target="year" operand="set"></mapping>
					<mapping value="speaker" target="speaker" operand="set"></mapping>
					<mapping value="startTime" target="startTime" operand="set"></mapping>
					<mapping value="id" target="id" operand="set"></mapping>
					<mapping value="endTime" target="endTime" operand="set"></mapping>
					<mapping value="title" target="title" operand="set"></mapping>
					<mapping value="room" target="room" operand="set"></mapping>
				</event-handler>
			</aggregate>
			<aggregate name="Visitor" event-ttl="7776000" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="firstName" type="String"></field>
				<field name="lastName" type="String"></field>
				<field name="year" type="String"></field>
				<field name="ticketId" type="String"></field>
				<field name="email" type="String"></field>
				<command name="Create" create-command="true">
					<trigger key-field="ticketId" source="ConferenceRegistrationManagerVisitorRegistered">
						<mapping value="year" target="year"></mapping>
						<mapping value="ticketId" target="ticketId"></mapping>
						<mapping value="firstName" target="firstName"></mapping>
						<mapping value="lastName" target="lastName"></mapping>
						<mapping value="email" target="email"></mapping>
					</trigger>
					<processor type="emit-event" ref="ConferenceVisitorCreated" id="mFsax">
						<mapping target="firstName" value="#flow.firstName"></mapping>
						<mapping target="lastName" value="#flow.lastName"></mapping>
						<mapping target="year" value="#flow.year"></mapping>
						<mapping target="ticketId" value="#flow.ticketId"></mapping>
						<mapping target="email" value="#flow.email"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="ConferenceRegistrationManagerVisitorRegistered" user="systemuser">
						<input name="year" type="String" value="2024"></input>
						<input name="ticketId" type="String" value="devconf-ticket:189673085831463618233454140431942137832"></input>
						<input name="firstName" type="String" value="John"></input>
						<input name="lastName" type="String" value="Doe"></input>
						<input name="email" type="String" value="john.doe@example.com"></input>
						<expected domain-event="ConferenceVisitorCreated">
							<field name="ticketId" type="String" value="devconf-ticket:189673085831463618233454140431942137832"></field>
						</expected>
						<expected-state pk="devconf-ticket:189673085831463618233454140431942137832">{"ticketId": "devconf-ticket:189673085831463618233454140431942137832", "year": "2024", "firstName": "John", "lastName": "Doe", "email": "john.doe@example.com"}</expected-state>
					</test-case>
				</command>
				<event-handler on="ConferenceVisitorCreated">
					<mapping value="firstName" target="firstName" operand="set"></mapping>
					<mapping value="lastName" target="lastName" operand="set"></mapping>
					<mapping value="year" target="year" operand="set"></mapping>
					<mapping value="ticketId" target="ticketId" operand="set"></mapping>
					<mapping value="email" target="email" operand="set"></mapping>
				</event-handler>
			</aggregate>
			<aggregate name="Ticket" event-ttl="-1" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="year" type="String"></field>
				<field name="verified" type="Boolean"></field>
				<field name="ticketId" type="String"></field>
				<field name="breakouts" type="String"></field>
				<field name="control" type="String"></field>
				<field name="redeemed" type="Boolean"></field>
				<command name="Create" create-command="true">
					<trigger key-field="ticketId" source="ConferenceRegistrationManagerVisitorRegistered">
						<mapping value="year" target="year"></mapping>
						<mapping value="ticketId" target="ticketId"></mapping>
						<mapping value="breakouts" target="breakouts"></mapping>
						<mapping target="control" value="control"></mapping>
					</trigger>
					<processor type="emit-event" ref="ConferenceTicketCreated" id="3BC8k">
						<mapping target="year" value="#flow.year"></mapping>
						<mapping target="ticketId" value="#flow.ticketId"></mapping>
						<mapping target="breakouts" value="#flow.breakouts"></mapping>
						<mapping target="control" value="#flow.control"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="ConferenceRegistrationManagerVisitorRegistered" user="systemuser">
						<input name="year" value="2024" type="String"></input>
						<input name="ticketId" value="devconf-ticket:189673085831463618233454140431942137832" type="String"></input>
						<input name="firstName" value="" type="String"></input>
						<input name="lastName" value="" type="String"></input>
						<input name="email" value="" type="String"></input>
						<input name="breakouts" value="2024-1,2024-2" type="String"></input>
						<input name="control" value="d7e4aee8-e0fa-4873-84f8-3f4685ceaa32" type="String"></input>
						<expected domain-event="ConferenceTicketCreated">
							<field value="2024" name="year" type="String"></field>
							<field value="devconf-ticket:189673085831463618233454140431942137832" name="ticketId" type="String"></field>
							<field value="2024-1,2024-2" name="breakouts" type="String"></field>
							<field value="d7e4aee8-e0fa-4873-84f8-3f4685ceaa32" name="control" type="String"></field>
						</expected>
						<expected-state pk="devconf-ticket:189673085831463618233454140431942137832">{"year": "2024", "ticketId": "devconf-ticket:189673085831463618233454140431942137832", "breakouts": "2024-1,2024-2","control":"d7e4aee8-e0fa-4873-84f8-3f4685ceaa32","verified":false,"redeemed":false}</expected-state>
					</test-case>
				</command>
				<command name="Verify">
					<trigger source="VerifyTicketRequested" key-field="ticketId">
						<mapping target="ticketId" value="ticketId"></mapping>
						<mapping target="control" value="control"></mapping>
						<mapping target="verified" value="#True"></mapping>
					</trigger>
					<processor type="validator" id="M1vejN" condition="flow.control == flow.entity.control" exception="Control value [{flow.control}] does not match the ticket [{flow.entity.control}]"></processor>
					<processor type="emit-event" id="9iWObF" ref="ConferenceTicketVerified">
						<mapping target="ticketId" value="#flow.ticketId"></mapping>
						<mapping target="verified" value="#flow.verified"></mapping>
					</processor>
					<test-case name="HappyFlow" trigger-event="VerifyTicketRequested">
						<input name="ticketId" value="123" type="String"></input>
						<input name="control" value="456" type="String"></input>
						<expected domain-event="ConferenceTicketVerified">
							<field value="123" name="ticketId" type="String"></field>
						</expected>
						<state>{
  "verified": false,
  "ticketId": "123",
  "control": "456"
}</state>
						<expected-state pk="123">{
  "verified": true
}</expected-state>
					</test-case>
				</command>
				<command name="Redeem">
					<trigger source="RedeemTicketRequested" key-field="ticketId">
						<mapping target="ticketId" value="ticketId"></mapping>
						<mapping target="redeemed" value="#True"></mapping>
					</trigger>
					<processor type="validator" id="1toC90" condition="flow.entity.redeemed == False" exception="Ticket alreadt redeemed"></processor>
					<processor type="validator" id="7Z6hZr" condition="flow.entity.verified == True" exception="Invalid ticket"></processor>
					<processor type="emit-event" id="aqeUGS" ref="ConferenceTicketRedeemed">
						<mapping target="ticketId" value="#flow.ticketId"></mapping>
						<mapping target="redeemed" value="#flow.redeemed"></mapping>
					</processor>
					<test-case name="HappyFlow" trigger-event="RedeemTicketRequested">
						<input name="ticketId" value="123" type="String"></input>
						<expected domain-event="ConferenceTicketRedeemed">
							<field value="123" name="ticketId" type="String"></field>
							<field value="true" name="redeemed" type="Boolean"></field>
						</expected>
						<state>{
  "verified": true,
  "ticketId": "123",
  "redeemed": false
}</state>
						<expected-state pk="123">{
  "verified": true,
  "ticketId": "123",
  "redeemed": true
}</expected-state>
					</test-case>
					<test-case name="InvalidTicket" trigger-event="RedeemTicketRequested" expected-processing-status="error">
						<input name="ticketId" value="123" type="String"></input>
					</test-case>
					<test-case name="AlreadyRedeemed" trigger-event="RedeemTicketRequested" expected-processing-status="error">
						<input name="ticketId" value="123" type="String"></input>
					</test-case>
				</command>
				<event-handler on="ConferenceTicketCreated">
					<mapping value="year" target="year" operand="set"></mapping>
					<mapping value="ticketId" target="ticketId" operand="set"></mapping>
					<mapping value="breakouts" target="breakouts" operand="set"></mapping>
					<mapping target="control" operand="set" value="control"></mapping>
				</event-handler>
				<event-handler on="ConferenceTicketVerified">
					<mapping target="verified" operand="set" value="verified"></mapping>
				</event-handler>
				<event-handler on="ConferenceTicketRedeemed">
					<mapping target="redeemed" operand="set" value="redeemed"></mapping>
				</event-handler>
			</aggregate>
			<aggregate name="TalkProposal" event-ttl="-1" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="difficultyLevel" type="String"></field>
				<field name="name" type="String"></field>
				<field name="abstract" type="String"></field>
				<field name="biography" type="String"></field>
				<field name="id" type="String"></field>
				<field name="title" type="String"></field>
				<field name="email" type="String"></field>
				<command name="Create" create-command="true">
					<trigger key-field="id" source="CreateConferenceTalkProposalRequested">
						<mapping value="difficultyLevel" target="difficultyLevel"></mapping>
						<mapping value="name" target="name"></mapping>
						<mapping value="abstract" target="abstract"></mapping>
						<mapping value="biography" target="biography"></mapping>
						<mapping value="id" target="id"></mapping>
						<mapping value="title" target="title"></mapping>
						<mapping value="email" target="email"></mapping>
					</trigger>
					<processor type="code" handler="decode_proposal" file="lib/Utils.py" id="Q3Bib"></processor>
					<processor type="emit-event" ref="ConferenceTalkProposalCreated" id="iKfP9">
						<mapping target="difficultyLevel" value="#flow.difficultyLevel"></mapping>
						<mapping target="name" value="#flow.name"></mapping>
						<mapping target="abstract" value="#flow.abstract"></mapping>
						<mapping target="biography" value="#flow.biography"></mapping>
						<mapping target="id" value="#flow.id"></mapping>
						<mapping target="title" value="#flow.title"></mapping>
						<mapping target="email" value="#flow.email"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="CreateConferenceTalkProposalRequested" user="systemuser">
						<input name="difficultyLevel" type="String" value="novice"></input>
						<input name="name" type="String" value="John Doe"></input>
						<input name="abstract" type="String" value="base64:SGVsbG8gV29ybGQh"></input>
						<input name="biography" type="String" value="base64:SGVsbG8gV29ybGQh"></input>
						<input name="id" type="String" value="ba5994a0-adc9-40a9-ac8d-0b48389f2fc5"></input>
						<input name="title" type="String" value="My Awesome Talk"></input>
						<input name="email" type="String" value="john.doe@demo.nl"></input>
						<expected domain-event="ConferenceTalkProposalCreated">
							<field name="difficultyLevel" type="String" value="novice"></field>
							<field name="name" type="String" value="John Doe"></field>
							<field name="abstract" type="String" value="Hello World!"></field>
							<field name="biography" type="String" value="Hello World!"></field>
							<field name="id" type="String" value="ba5994a0-adc9-40a9-ac8d-0b48389f2fc5"></field>
							<field name="title" type="String" value="My Awesome Talk"></field>
							<field name="email" type="String" value="john.doe@demo.nl"></field>
						</expected>
					</test-case>
				</command>
				<event-handler on="ConferenceTalkProposalCreated">
					<mapping value="difficultyLevel" target="difficultyLevel" operand="set"></mapping>
					<mapping value="name" target="name" operand="set"></mapping>
					<mapping value="abstract" target="abstract" operand="set"></mapping>
					<mapping value="biography" target="biography" operand="set"></mapping>
					<mapping value="id" target="id" operand="set"></mapping>
					<mapping value="title" target="title" operand="set"></mapping>
					<mapping value="email" target="email" operand="set"></mapping>
				</event-handler>
			</aggregate>
			<aggregate name="Edition" event-ttl="-1" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="date" type="String"></field>
				<field name="year" type="String"></field>
				<field name="tagline" type="String"></field>
				<field name="program" type="Map"></field>
				<command name="AddProgramItem" create-command="false">
					<trigger key-field="year" source="AddProgramItemConferenceRequested">
						<mapping value="summary" target="summary"></mapping>
						<mapping value="duration" target="duration"></mapping>
						<mapping value="year" target="year"></mapping>
						<mapping value="speaker" target="speaker"></mapping>
						<mapping value="startTime" target="startTime"></mapping>
						<mapping value="title" target="title"></mapping>
						<mapping value="room" target="room"></mapping>
						<mapping target="id" value="id"></mapping>
					</trigger>
					<processor type="code" handler="determine_id_and_breakouts" file="lib/ProgrammaManagement.py" id="UEQl9"></processor>
					<processor type="emit-event" ref="ConferenceEditionProgramItemAdded" id="YIos2">
						<mapping target="id" value="#flow.id"></mapping>
						<mapping target="title" value="#flow.title"></mapping>
						<mapping target="summary" value="#flow.summary"></mapping>
						<mapping target="speaker" value="#flow.speaker"></mapping>
						<mapping target="room" value="#flow.room"></mapping>
						<mapping target="startTime" value="#flow.startTime"></mapping>
						<mapping target="duration" value="#flow.duration"></mapping>
						<mapping target="breakout" value="#flow.breakout"></mapping>
						<mapping target="session" value="#flow.session"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="AddProgramItemConferenceRequested" user="systemuser">
						<input name="summary" type="String" value="Hello World!"></input>
						<input name="duration" type="Number" value="45"></input>
						<input name="year" type="String" value="2024"></input>
						<input name="speaker" type="String" value="John Doe"></input>
						<input name="startTime" type="String" value="09:00"></input>
						<input name="title" type="String" value="Dummy"></input>
						<input name="room" type="String" value="Forum"></input>
						<input name="id" type="String" value="2024-1"></input>
						<expected domain-event="ConferenceEditionProgramItemAdded">
							<field name="id" type="String" value="2024-1"></field>
							<field name="breakout" type="Boolean" value="False"></field>
							<field name="session" type="Number" value="0"></field>
						</expected>
					</test-case>
				</command>
				<command name="Initialize" create-command="true">
					<trigger key-field="year" source="InitializeEditionConferenceRequested">
						<mapping value="date" target="date"></mapping>
						<mapping value="year" target="year"></mapping>
						<mapping value="tagline" target="tagline"></mapping>
					</trigger>
					<processor type="emit-event" ref="ConferenceEditionInitialized" id="cdPTj">
						<mapping target="date" value="#flow.date"></mapping>
						<mapping target="year" value="#flow.year"></mapping>
						<mapping target="tagline" value="#flow.tagline"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="InitializeEditionConferenceRequested" user="systemuser">
						<input name="date" type="String" value="27-03-2024"></input>
						<input name="year" type="String" value="2024"></input>
						<input name="tagline" type="String" value="5 jarig jubileum"></input>
						<expected domain-event="ConferenceEditionInitialized">
							<field name="date" type="String" value="27-03-2024"></field>
							<field name="year" type="String" value="2024"></field>
							<field name="tagline" type="String" value="5 jarig jubileum"></field>
						</expected>
					</test-case>
				</command>
				<event-handler on="ConferenceEditionProgramItemAdded" code='self.program[event.id] = {|LB|  "startTime" : event.startTime,|LB|  "breakout":event.breakout,|LB|  "session":event.session}'></event-handler>
				<event-handler on="ConferenceEditionInitialized">
					<mapping value="date" target="date" operand="set"></mapping>
					<mapping value="year" target="year" operand="set"></mapping>
					<mapping value="tagline" target="tagline" operand="set"></mapping>
				</event-handler>
			</aggregate>
			<aggregate name="RegistrationManager" event-ttl="-1" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="closeDate" type="String"></field>
				<field name="visitors" type="StringList"></field>
				<field name="year" type="String"></field>
				<field name="registeredVisitors" type="Int"></field>
				<field name="openDate" type="String"></field>
				<field name="maxVisitors" type="Int"></field>
				<command name="RegisterVisitor" create-command="false">
					<trigger key-field="year" source="RegisterVisitorConferenceRegistrationManagerRequested">
						<mapping value="firstName" target="firstName"></mapping>
						<mapping value="lastName" target="lastName"></mapping>
						<mapping value="year" target="year"></mapping>
						<mapping value="email" target="email"></mapping>
						<mapping value="breakouts" target="breakouts"></mapping>
						<mapping target="control" value="control"></mapping>
					</trigger>
					<processor type="code" handler="register_visitor" file="lib/VisitorManagement.py" id="O4qkj"></processor>
					<processor type="emit-event" ref="ConferenceRegistrationManagerVisitorRegistered" id="SX5yG">
						<mapping target="year" value="#flow.year"></mapping>
						<mapping target="ticketId" value="#flow.ticketId"></mapping>
						<mapping target="firstName" value="#flow.firstName"></mapping>
						<mapping target="lastName" value="#flow.lastName"></mapping>
						<mapping target="email" value="#flow.email"></mapping>
						<mapping target="breakouts" value="#flow.breakouts"></mapping>
						<mapping target="control" value="#flow.control"></mapping>
					</processor>
					<test-case name="RegistrationClosed" expected-processing-status="error" trigger-event="RegisterVisitorConferenceRegistrationManagerRequested" user="systemuser">
						<input name="firstName" value="John" type="String"></input>
						<input name="lastName" value="Doe" type="String"></input>
						<input name="year" value="2024" type="String"></input>
						<input name="email" value="john.doe@example.com" type="String"></input>
						<input name="control" value="f94bff90-ab56-42ec-a916-d47540b832ce" type="String"></input>
						<input name="breakouts" type="NestedObject">[{"id": "2024-1"}]</input>
						<state>{"openDate": "01-01-2010", "closeDate": "01-01-2011"}</state>
					</test-case>
					<test-case name="NoSeatsLeft" expected-processing-status="error" trigger-event="RegisterVisitorConferenceRegistrationManagerRequested" user="systemuser">
						<input name="firstName" value="John" type="String"></input>
						<input name="lastName" value="Doe" type="String"></input>
						<input name="year" value="2024" type="String"></input>
						<input name="email" value="john.doe@example.com" type="String"></input>
						<input name="control" value="f94bff90-ab56-42ec-a916-d47540b832ce" type="String"></input>
						<input name="breakouts" type="NestedObject">[{"id": "2024-1"}, {"id": "2024-2"}]</input>
						<state>{"openDate": "01-01-2023", "closeDate": "01-01-2123", "maxVisitors": 1, "visitors": ["dummy"], "registeredVisitors": 1}</state>
					</test-case>
					<test-case name="RegisterVisitor" expected-processing-status="success" trigger-event="RegisterVisitorConferenceRegistrationManagerRequested" user="systemuser">
						<input name="firstName" value="John" type="String"></input>
						<input name="lastName" value="Doe" type="String"></input>
						<input name="year" value="2024" type="String"></input>
						<input name="email" value="john.doe@EXAMPLE.com" type="String"></input>
						<input name="control" value="f94bff90-ab56-42ec-a916-d47540b832ce" type="String"></input>
						<input name="breakouts" type="NestedObject">[{"id": "2024-1"}, {"id": "2024-2"}]</input>
						<state>{"openDate": "01-01-2023", "closeDate": "01-01-2123", "maxVisitors": 10}</state>
						<expected domain-event="ConferenceRegistrationManagerVisitorRegistered">
							<field value="devconf-ticket:189673085831463618233454140431942137832" name="ticketId" type="String"></field>
							<field value="john.doe@example.com" name="email" type="String"></field>
							<field value="2024-1,2024-2" name="breakouts" type="String"></field>
							<field value="f94bff90-ab56-42ec-a916-d47540b832ce" name="control" type="String"></field>
						</expected>
						<expected-state pk="2024">{"visitors": ["devconf-ticket:189673085831463618233454140431942137832"], "registeredVisitors": 1}</expected-state>
					</test-case>
					<test-case name="AlreadyRegistered" expected-processing-status="error" trigger-event="RegisterVisitorConferenceRegistrationManagerRequested" user="systemuser">
						<input name="firstName" value="John" type="String"></input>
						<input name="lastName" value="Doe" type="String"></input>
						<input name="year" value="2024" type="String"></input>
						<input name="email" value="john.doe@example.com" type="String"></input>
						<input name="control" value="f94bff90-ab56-42ec-a916-d47540b832ce" type="String"></input>
						<input name="breakouts" type="NestedObject">[{"id": "2024-1"}, {"id": "2024-2"}]</input>
						<state>{"openDate": "01-01-2023", "closeDate": "01-01-2123", "maxVisitors": 200, "visitors": ["devconf-ticket:189673085831463618233454140431942137832"], "registeredVisitors": 1}</state>
					</test-case>
				</command>
				<command name="Initialize" create-command="true">
					<trigger key-field="year" source="ConferenceEditionInitialized">
						<mapping value="date" target="date"></mapping>
						<mapping value="#200" target="maxVisitors"></mapping>
						<mapping value="year" target="year"></mapping>
					</trigger>
					<processor type="code" handler="calculate_time_frame" file="lib/VisitorManagement.py" id="jGNDN"></processor>
					<processor type="emit-event" ref="ConferenceRegistrationManagerInitialized" id="g6Oc2">
						<mapping target="closeDate" value="#flow.closeDate"></mapping>
						<mapping target="openDate" value="#flow.openDate"></mapping>
						<mapping target="maxVisitors" value="#flow.maxVisitors"></mapping>
						<mapping target="year" value="#flow.year"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="ConferenceEditionInitialized" user="systemuser">
						<input name="date" type="String" value="27-03-2024"></input>
						<input name="year" type="String" value="2024"></input>
						<expected domain-event="ConferenceRegistrationManagerInitialized">
							<field name="closeDate" type="String" value="20-03-2024"></field>
							<field name="openDate" type="String" value="31-01-2024"></field>
							<field name="maxVisitors" type="Number" value="200"></field>
						</expected>
					</test-case>
				</command>
				<command name="Configure" create-command="false">
					<trigger key-field="year" source="ConfigureConferenceRegistrationManagerRequested">
						<mapping value="closeDate" target="closeDate"></mapping>
						<mapping value="openDate" target="openDate"></mapping>
						<mapping value="maxVisitors" target="maxVisitors"></mapping>
						<mapping value="year" target="year"></mapping>
					</trigger>
					<processor type="emit-event" ref="ConferenceRegistrationManagerUpdated" id="XQMGH">
						<mapping target="closeDate" value="#flow.closeDate"></mapping>
						<mapping target="openDate" value="#flow.openDate"></mapping>
						<mapping target="maxVisitors" value="#flow.maxVisitors"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="ConfigureConferenceRegistrationManagerRequested" user="systemuser">
						<input name="closeDate" type="String" value="01-01-2123"></input>
						<input name="openDate" type="String" value="01-01-2023"></input>
						<input name="maxVisitors" type="Number" value="10"></input>
						<input name="year" type="String" value="2024"></input>
						<state>{"openDate": "05-05-2023", "closeDate": "10-10-2023", "maxVisitors": 200}</state>
						<expected domain-event="ConferenceRegistrationManagerUpdated">
							<field name="maxVisitors" type="Number" value="10"></field>
						</expected>
						<expected-state pk="2024">{"openDate": "01-01-2023", "closeDate": "01-01-2123", "maxVisitors": 10}</expected-state>
					</test-case>
				</command>
				<event-handler on="ConferenceRegistrationManagerVisitorRegistered" code="self.registeredVisitors += 1|LB|self.visitors.append(event.ticketId)"></event-handler>
				<event-handler on="ConferenceRegistrationManagerUpdated">
					<mapping value="closeDate" target="closeDate" operand="set"></mapping>
					<mapping value="openDate" target="openDate" operand="set"></mapping>
					<mapping value="maxVisitors" target="maxVisitors" operand="set"></mapping>
				</event-handler>
				<event-handler on="ConferenceRegistrationManagerInitialized">
					<mapping value="closeDate" target="closeDate" operand="set"></mapping>
					<mapping value="openDate" target="openDate" operand="set"></mapping>
					<mapping value="maxVisitors" target="maxVisitors" operand="set"></mapping>
					<mapping value="year" target="year" operand="set"></mapping>
				</event-handler>
			</aggregate>
		</subdomain>
		<subdomain name="WebSite">
			<aggregate name="Element" event-ttl="-1" snapshot-interval="100" backup-interval-days="0" backup-ttl-days="0">
				<field name="name" type="String"></field>
				<field name="content" type="String"></field>
				<command name="Update" create-command="false">
					<trigger key-field="name" source="UpdateWebSiteElementRequested">
						<mapping value="name" target="name"></mapping>
						<mapping value="content" target="content"></mapping>
					</trigger>
					<processor type="code" handler="decode_content" file="lib/Utils.py" id="kmdno"></processor>
					<processor type="emit-event" ref="WebSiteElementUpdated" id="UIkoJ">
						<mapping target="name" value="#flow.name"></mapping>
						<mapping target="content" value="#flow.content"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="UpdateWebSiteElementRequested" user="systemuser">
						<input name="name" type="String" value="test"></input>
						<input name="content" type="String" value="Hello World!"></input>
						<expected domain-event="WebSiteElementUpdated">
							<field name="name" type="String" value="test"></field>
							<field name="content" type="String" value="Hello World!"></field>
						</expected>
					</test-case>
				</command>
				<command name="Create" create-command="true">
					<trigger key-field="name" source="CreateWebSiteElementRequested">
						<mapping value="name" target="name"></mapping>
						<mapping value="content" target="content"></mapping>
					</trigger>
					<processor type="code" handler="decode_content" file="lib/Utils.py" id="lGGTT"></processor>
					<processor type="emit-event" ref="WebSiteElementCreated" id="G3nyz">
						<mapping target="name" value="#flow.name"></mapping>
						<mapping target="content" value="#flow.content"></mapping>
					</processor>
					<test-case name="HappyFlow" expected-processing-status="success" trigger-event="CreateWebSiteElementRequested" user="systemuser">
						<input name="name" type="String" value="call-to-action"></input>
						<input name="content" type="String" value="Hello World!"></input>
						<expected domain-event="WebSiteElementCreated">
							<field name="name" type="String" value="call-to-action"></field>
							<field name="content" type="String" value="Hello World!"></field>
						</expected>
					</test-case>
				</command>
				<event-handler on="WebSiteElementUpdated">
					<mapping value="name" target="name" operand="set"></mapping>
					<mapping value="content" target="content" operand="set"></mapping>
				</event-handler>
				<event-handler on="WebSiteElementCreated">
					<mapping value="name" target="name" operand="set"></mapping>
					<mapping value="content" target="content" operand="set"></mapping>
				</event-handler>
			</aggregate>
		</subdomain>
	</domain>
	<views>
		<view name="TalkProposal" data-retention-days="-1" exclude-notification="false">
			<field name="difficultyLevel" type="String"></field>
			<field name="name" type="String"></field>
			<field name="abstract" type="String"></field>
			<field name="biography" type="String"></field>
			<field name="id" type="String" pk="true"></field>
			<field name="title" type="String"></field>
			<field name="email" type="String"></field>
			<snapshot-handler sub-domain="Conference" aggregate="TalkProposal" key-mapping="id" processor="item" id="kW1LRV">
				<mapping target="difficultyLevel" operand="set" value="difficultyLevel"></mapping>
				<mapping target="name" operand="set" value="name"></mapping>
				<mapping target="abstract" operand="set" value="abstract"></mapping>
				<mapping target="biography" operand="set" value="biography"></mapping>
				<mapping target="id" operand="set" value="id"></mapping>
				<mapping target="title" operand="set" value="title"></mapping>
				<mapping target="email" operand="set" value="email"></mapping>
			</snapshot-handler>
			<query type="filter" authorization="role" role="administrator" field-name="filter" graphql-namespace="TalkProposal"></query>
		</view>
		<view name="Ticket" data-retention-days="-1" exclude-notification="false">
			<field name="year" type="String"></field>
			<field name="verified" type="Boolean"></field>
			<field name="ticketId" type="String" pk="true"></field>
			<field name="breakouts" type="String"></field>
			<field name="redeemed" type="Boolean"></field>
			<field name="control" type="String"></field>
			<snapshot-handler id="Yzgy2w" sub-domain="Conference" aggregate="Ticket" key-mapping="ticketId" processor="item">
				<mapping target="year" operand="set" value="year"></mapping>
				<mapping target="verified" operand="set" value="verified"></mapping>
				<mapping target="ticketId" operand="set" value="ticketId"></mapping>
				<mapping target="breakouts" operand="set" value="breakouts"></mapping>
				<mapping target="redeemed" operand="set" value="redeemed"></mapping>
				<mapping target="control" operand="set" value="control"></mapping>
				<delete condition="#snapshot.isDeleted != ''"></delete>
			</snapshot-handler>
			<query graphql-namespace="Ticket" field-name="get" type="get" authorization="role" role="administrator"></query>
			<query graphql-namespace="Ticket" field-name="filter" type="filter" authorization="role" role="administrator"></query>
		</view>
		<view name="ProgramItem" data-retention-days="-1" exclude-notification="false">
			<field name="summary" type="String"></field>
			<field name="year" type="String"></field>
			<field name="session" type="Int"></field>
			<field name="edition" type="ManyToOne" authorization="authenticated" foreign-key="year" ref="Edition"></field>
			<field name="program" type="ManyToOne" authorization="authenticated" foreign-key="year" ref="Program"></field>
			<field name="title" type="String"></field>
			<field name="room" type="String"></field>
			<field name="duration" type="Int"></field>
			<field name="breakout" type="Boolean"></field>
			<field name="speaker" type="String"></field>
			<field name="startTime" type="String"></field>
			<field name="id" type="String" pk="true"></field>
			<field name="endTime" type="String"></field>
			<snapshot-handler sub-domain="Conference" aggregate="ProgramItem" key-mapping="id" processor="item" id="jew4KR">
				<mapping target="summary" operand="set" value="summary"></mapping>
				<mapping target="duration" operand="set" value="duration"></mapping>
				<mapping target="year" operand="set" value="year"></mapping>
				<mapping target="speaker" operand="set" value="speaker"></mapping>
				<mapping target="startTime" operand="set" value="startTime"></mapping>
				<mapping target="id" operand="set" value="id"></mapping>
				<mapping target="endTime" operand="set" value="endTime"></mapping>
				<mapping target="title" operand="set" value="title"></mapping>
				<mapping target="room" operand="set" value="room"></mapping>
			</snapshot-handler>
			<custom-handler sub-domain="Conference" aggregate="Edition" id="YjCMTN">for item_key, item in snapshot.program.items():
	entity = EntityManager.get(type="ProgramItem", key=item_key)
	entity.breakout = item["breakout"]
	entity.session = item["session"]</custom-handler>
			<query type="filter" authorization="anonymous" field-name="filter" graphql-namespace="Program.Item">
				<filter-clause operand="equals" field-name="year"></filter-clause>
				<filter-clause operand="equals" field-name="room"></filter-clause>
				<filter-clause operand="equals" field-name="speaker"></filter-clause>
				<filter-clause operand="equals" field-name="session"></filter-clause>
				<filter-clause operand="equals" field-name="breakout"></filter-clause>
			</query>
			<query type="get" authorization="anonymous" field-name="get" graphql-namespace="Program.Item"></query>
		</view>
		<view name="Program" data-retention-days="-1" exclude-notification="false">
			<field name="programItem" type="OneToMany" authorization="authenticated" foreign-key="year" ref="ProgramItem"></field>
			<field name="year" type="String" pk="true"></field>
			<field name="start" type="String"></field>
			<field name="edition" type="OneToOne" authorization="authenticated" foreign-key="year" ref="Edition"></field>
			<field name="end" type="String"></field>
			<custom-handler sub-domain="Conference" aggregate="ProgramItem" id="8mr1ER">key = snapshot.year
entity = EntityManager.get(type="Program", key=key)
entity.year = snapshot.year
entity.start = entity.start if entity.start != "" and int(entity.start.replace(":","")) &lt; int(snapshot.startTime.replace(":","")) else snapshot.startTime
entity.end = entity.end if entity.end != "" and int(entity.end.replace(":","")) &gt; int(snapshot.endTime.replace(":","")) else snapshot.endTime
if snapshot.isDeleted != '':
	entity.mark_for_deletion = True</custom-handler>
			<query type="filter" authorization="anonymous" field-name="filter" graphql-namespace="Program"></query>
			<query type="get" authorization="anonymous" field-name="get" graphql-namespace="Program"></query>
		</view>
		<view name="RegistrationManager" data-retention-days="-1" exclude-notification="false">
			<field name="closeDate" type="String"></field>
			<field name="year" type="String" pk="true"></field>
			<field name="registeredVisitors" type="Int"></field>
			<field name="openDate" type="String"></field>
			<field name="maxVisitors" type="Int"></field>
			<snapshot-handler sub-domain="Conference" aggregate="RegistrationManager" key-mapping="year" processor="item" id="olH32k">
				<mapping target="closeDate" operand="set" value="closeDate"></mapping>
				<mapping target="year" operand="set" value="year"></mapping>
				<mapping target="registeredVisitors" operand="set" value="registeredVisitors"></mapping>
				<mapping target="openDate" operand="set" value="openDate"></mapping>
				<mapping target="maxVisitors" operand="set" value="maxVisitors"></mapping>
				<delete condition="#snapshot.isDeleted != ''"></delete>
			</snapshot-handler>
			<query type="get" authorization="anonymous" field-name="get" graphql-namespace="Conference.RegistrationManager"></query>
		</view>
		<view name="WebPageElement" data-retention-days="-1" exclude-notification="false">
			<field name="year" type="String"></field>
			<field name="name" type="String" pk="true"></field>
			<field name="edition" type="OneToOne" authorization="authenticated" foreign-key="year" ref="Edition"></field>
			<field name="content" type="String"></field>
			<snapshot-handler sub-domain="WebSite" aggregate="Element" key-mapping="name" processor="item" id="fMBDED">
				<mapping target="name" operand="set" value="name"></mapping>
				<mapping target="content" operand="set" value="content"></mapping>
			</snapshot-handler>
			<custom-handler sub-domain="Conference" aggregate="Edition" python-file="lib/ViewFunctions.py" method="determine_next_edition" id="VpQR4v"></custom-handler>
			<query type="filter" authorization="anonymous" field-name="filter" graphql-namespace="WebSite.Element"></query>
			<query type="get" authorization="anonymous" field-name="get" graphql-namespace="WebSite.Element"></query>
		</view>
		<view name="Visitor" data-retention-days="90" exclude-notification="false">
			<field name="firstName" type="String"></field>
			<field name="lastName" type="String"></field>
			<field name="year" type="String"></field>
			<field name="ticketId" type="String"></field>
			<field name="email" type="String" pk="true"></field>
			<field name="ticket" type="OneToOne" ref="Ticket" authorization="authenticated" foreign-key="ticketId"></field>
			<snapshot-handler id="XvTaSi" sub-domain="Conference" aggregate="Visitor" key-mapping="email" processor="item">
				<mapping target="firstName" operand="set" value="firstName"></mapping>
				<mapping target="lastName" operand="set" value="lastName"></mapping>
				<mapping target="year" operand="set" value="year"></mapping>
				<mapping target="ticketId" operand="set" value="ticketId"></mapping>
				<mapping target="email" operand="set" value="email"></mapping>
				<delete condition="#snapshot.isDeleted != ''"></delete>
			</snapshot-handler>
			<query graphql-namespace="Visitor" field-name="get" type="get" authorization="role" role="administrator"></query>
			<query graphql-namespace="Visitor" field-name="filter" type="filter" authorization="role" role="administrator">
				<filter-clause field-name="ticketId" operand="equals"></filter-clause>
			</query>
		</view>
		<view name="Edition" data-retention-days="-1" exclude-notification="false">
			<field name="date" type="String"></field>
			<field name="year" type="String" pk="true"></field>
			<field name="registrationManager" type="OneToOne" authorization="authenticated" foreign-key="year" ref="RegistrationManager"></field>
			<field name="tagline" type="String"></field>
			<field name="program" type="OneToOne" authorization="authenticated" foreign-key="year" ref="Program"></field>
			<snapshot-handler sub-domain="Conference" aggregate="Edition" key-mapping="year" processor="item" id="ZUk0wn">
				<mapping target="date" operand="set" value="date"></mapping>
				<mapping target="year" operand="set" value="year"></mapping>
				<mapping target="tagline" operand="set" value="tagline"></mapping>
			</snapshot-handler>
			<query type="filter" authorization="anonymous" field-name="filter" graphql-namespace="Edition"></query>
			<query type="get" authorization="anonymous" field-name="get" graphql-namespace="Edition"></query>
		</view>
	</views>
	<projections>
	</projections>
	<notifiers>
		<notifier name="SendTicketVerification">
			<trigger source="ConferenceRegistrationManagerVisitorRegistered">
				<mapping target="year" value="year"></mapping>
				<mapping target="ticketId" value="ticketId"></mapping>
				<mapping target="firstName" value="firstName"></mapping>
				<mapping target="lastName" value="lastName"></mapping>
				<mapping target="email" value="email"></mapping>
				<mapping target="control" value="control"></mapping>
			</trigger>
			<trigger source="ResendVerificationTicketRequested">
				<mapping target="year" value="year"></mapping>
				<mapping target="ticketId" value="ticketId"></mapping>
				<mapping target="firstName" value="firstName"></mapping>
				<mapping target="lastName" value="lastName"></mapping>
				<mapping target="email" value="email"></mapping>
				<mapping target="control" value="control"></mapping>
			</trigger>
			<activity type="fetch-property" id="LanEWy" name="apiKey" key="mailgunKey"></activity>
			<activity type="set-variable" id="9wrt54" name="host" expression="#'http://localhost:8181' if os.environ['Stage'] == 'staging' else 'https://devconf.nl'"></activity>
			<activity type="set-variable" id="8n3Dtb" name="subject" expression="#'Je inschrijving is bijna klaar!'"></activity>
			<activity type="render-template" id="y41GHO" name="html" template-file="templates/TicketVerificationMail.html"></activity>
			<activity type="render-template" id="KOeswM" name="text" template-file="templates/TicketVerificationMail.txt"></activity>
			<activity type="code" id="RWPf3X" python-file="lib/MailGun.py" handler="send"></activity>
		</notifier>
		<notifier name="SendTicket">
			<trigger source="ConferenceTicketVerified">
				<mapping target="ticketId" value="ticketId"></mapping>
				<mapping target="verified" value="verified"></mapping>
			</trigger>
			<trigger source="ResendTicketRequested">
				<mapping target="ticketId" value="ticketId"></mapping>
				<mapping target="verified" value="#True"></mapping>
			</trigger>
			<activity type="fetch-property" id="LanEWy" name="apiKey" key="mailgunKey"></activity>
			<activity type="call-internal-api" id="gkHtJy" name="ticketResult" query='query MyQuery {|LB|  Visitor {|LB|    filter(ticketId_equals: "{{flow.ticketId}}") {|LB|      resultset {|LB|        email|LB|        firstName|LB|      }|LB|    }|LB|  }|LB|  Ticket {|LB|    get(key: "{{flow.ticketId}}") {|LB|      breakouts|LB|      year|LB|    }|LB|  }|LB|}|LB|'></activity>
			<activity type="call-internal-api" id="eveMiC" name="programResult" query='query MyQuery {|LB|  Program {|LB|    get(key: "{{flow.ticketResult.data.Ticket.get.year}}") {|LB|      edition {|LB|            date|LB|      }|LB|      programItem {|LB|        breakout|LB|        startTime|LB|        room|LB|        id|LB|        speaker|LB|        title|LB|      }|LB|    }|LB|  }|LB|}|LB|'></activity>
			<activity type="code" id="RWPf3Y" python-file="lib/TicketUtils.py" handler="prepare_ticket_mail"></activity>
			<activity type="render-template" id="y41GHO" name="html" template-file="templates/TicketMail.html"></activity>
			<activity type="render-template" id="KOeswM" name="text" template-file="templates/TicketMail.txt"></activity>
			<activity type="code" id="RWPf3X" python-file="lib/MailGun.py" handler="send"></activity>
		</notifier>
		<notifier name="InitializeSystemUser">
			<trigger source="@afterDeployment">
				<mapping target="role" value="#'administrator'"></mapping>
				<mapping target="user" value="#'system-user'"></mapping>
			</trigger>
			<activity type="iam-create-systemuser" fail-silent="true" id="vMB9LZ"></activity>
			<activity type="add-user-to-iam-group" id="gLpzK8" group-name="#flow.role" username="#flow.user"></activity>
		</notifier>
		<notifier name="HandleResenRequest">
			<trigger source="HandleLostTicketRequested">
				<mapping target="ticketId" value="ticketId"></mapping>
			</trigger>
			<activity type="call-internal-api" id="Mrxitu" name="ticket" query='query MyQuery {|LB|  Ticket {|LB|    get(key: "{{flow.ticketId}}") {|LB|      control|LB|      verified|LB|    }|LB|  }|LB|  Visitor {|LB|    filter(ticketId_equals: "{{flow.ticketId}}") {|LB|      resultset {|LB|        email|LB|        firstName|LB|        lastName|LB|        year|LB|      }|LB|    }|LB|  }|LB|}|LB|'></activity>
			<activity type="set-variable" id="RGPflM" name="visitor" expression="#flow.ticket.Visitor.filter.resultset[0]"></activity>
			<activity type="call-internal-api" id="t5izl3" name="mutation" condition="flow.ticket.data.Ticket.get.verified == False" query='mutation MyMutation {|LB|  Ticket {|LB|      resendVerification(input: {firstName: "{{flow.visitor.firstName}}", lastName: "{{flow.visitor.lastName}}", year: "{{flow.visitor.year}}", email: "{{flow.visitor.email}}", control: "{{flow.ticket.data.Ticket.get.control }}", ticketId: "{{flow.ticketId}}"}) {|LB|        correlationId|LB|      }|LB|  }|LB|}|LB|'></activity>
			<activity type="call-internal-api" id="gaFVDO" name="mutation" condition="flow.ticket.data.Ticket.get.verified == True" query='mutation MyMutation {|LB|  Ticket {|LB|      resend(input: {ticketId: "{{flow.ticketId}}"}) {|LB|        correlationId|LB|      }|LB|  }|LB|}|LB|'></activity>
		</notifier>
		<notifier name="SendProposalConfirmation" file_path="notifiers/SendProposalConfirmation.xml">
			<trigger source="ConferenceTalkProposalCreated">
				<mapping value="difficultyLevel" target="difficultyLevel"></mapping>
				<mapping value="name" target="name"></mapping>
				<mapping value="abstract" target="abstract"></mapping>
				<mapping value="biography" target="biography"></mapping>
				<mapping value="id" target="id"></mapping>
				<mapping value="title" target="title"></mapping>
				<mapping value="email" target="email"></mapping>
			</trigger>
			<activity type="fetch-property" key="mailgunKey" name="apiKey" id="c4NcAD"></activity>
			<activity type="set-variable" expression='#"Bedankt voor je proposal"' name="subject" id="p5oUyS"></activity>
			<activity type="render-template" template-file="templates/ConfirmationMail.html" name="html" id="KLiO9o"></activity>
			<activity type="render-template" id="DHXCaW" template-file="templates/ConfirmationMail.txt" name="text"></activity>
			<activity type="code" handler="send_with_copy_to_mailbox" python-file="lib/MailGun.py" id="2LjgLd"></activity>
		</notifier>
	</notifiers>
	<functional-scenarios clean-db="true" clean-iam="false" minimum-event-coverage="80" minimum-view-coverage="80">
		<scenario name="TalkProposal">
			<activity type="set-variables" id="orhaBC">
				<input name="email" type="String" value="bo.hanssen@hey.com"></input>
			</activity>
			<activity type="mutation" path="Conference.TalkProposal.create" id="mRaQOC">
				<input name="difficultyLevel" type="String" value="novice"></input>
				<input name="name" type="String" value="John Doe"></input>
				<input name="abstract" type="String" value="base64:V2hhdCBhcmUgdGhlIGV4cGVjdGF0aW9ucy4gTGV2ZWwgdGhlIHBsYXlpbmcgZmllbGQgY29weSBhbmQgcGFzdGUgZnJvbSBzdGFjayBvdmVyZmxvdywgd2UncmUgYnVpbGRpbmcgdGhlIHBsYW5lIHdoaWxlIHdlJ3JlIGZseWluZyBpdCBhIHNldCBvZiBjZXJ0aXR1ZGVzIGJhc2VkIG9uIGRlZHVjdGlvbnMgZm91bmRlZCBvbiBmYWxzZSBwcmVtaXNlLCBzbyBwdWxsIGluIHRlbiBleHRyYSBib2RpZXMgdG8gaGVscCByb2xsIHRoZSB0b3J0b2lzZSB0aGF0IGplcmsgZnJvbSBmaW5hbmNlIHJlYWxseSB0aHJldyBtZSB1bmRlciB0aGUgYnVzLiBXZSB3YW50IHRvIHNlZSBtb3JlIGNoYXJ0cy4gV2hlcmUgZG8gd2Ugc3RhbmQgb24gdGhlIGxhdGVzdCBjbGllbnQgYXNrIHByb2NlZHVyYWxpemUgd2UgbmVlZCBhIHJlY2FwIGJ5IGVvZCwgY29iIG9yIHdoYXRldmVyIGNvbWVzIGZpcnN0IGdvb2Qgb3B0aWNzLCBub3IgcHJvZHVjdCBsYXVuY2guIFVwc2VsbC4gT3JnYW5pYyBncm93dGggcmVncm91cCwgb3IgYSBzZXQgb2YgY2VydGl0dWRlcyBiYXNlZCBvbiBkZWR1Y3Rpb25zIGZvdW5kZWQgb24gZmFsc2UgcHJlbWlzZS4gV2UgZG9uJ3Qgd2FudCB0byBib2lsIHRoZSBvY2VhbiBvbndhcmQgYW5kIHVwd2FyZCwgcHJvZHVjdGl6ZSB0aGUgZGVsaXZlcmFibGVzIGFuZCBmb2N1cyBvbiB0aGUgYm90dG9tIGxpbmUsIGJ1dCB0aGUgaG9yc2UgaXMgb3V0IG9mIHRoZSBiYXJuIHByb2R1Y3QgbWFya2V0IGZpdC4="></input>
				<input name="biography" type="String" value="base64:SSdtIGJhYnkgZ2VudHJpZnkgdHJ1ZmZhdXQgRElZLCBmb3VyIGRvbGxhciB0b2FzdCB5ciBnbHV0ZW4tZnJlZSBkcmVhbWNhdGNoZXIgdmlueWwgZmxhbm5lbCBibGFja2JpcmQgc3B5cGxhbmUgbGVnZ2luZ3MuIEhhbW1vY2sgYmVzcG9rZSBzZW1pb3RpY3MsIGJhbmpvIHBvbGFyb2lkIG1peHRhcGUgZmxhbm5lbCBzZWl0YW4uIFVuaWNvcm4ga2FsZSBjaGlwcyBjaGlsbHdhdmUgaXJvbnkga29naSB0cnktaGFyZCB3YXlmYXJlcnMgYmFuaCBtaSBtYW4gYnJhaWQgZHJpbmtpbmcgdmluZWdhciBhY3R1YWxseSBCcm9va2x5biBvZmZhbCBwcmF4aXMgc2thdGVib2FyZC4gQ2VsaWFjIGZyZWVnYW4gdHJ5LWhhcmQsIG1pZ2FzIG5ldXRyYSByYXcgZGVuaW0gdW1hbWkgc3dhZyBjbGljaGUgYXV0aGVudGljIGVuYW1lbCBwaW4ga2V5dGFyIHNtYWxsIGJhdGNoIHNoYW1hbiBwb2tlLiBGb29kIHRydWNrIGNlbGlhYyBsdW1iZXJzZXh1YWwgcG91ci1vdmVyLiBUd2VlIHZlbm1vIGRyaW5raW5nIHZpbmVnYXIgbG9jYXZvcmUgYXN5bW1ldHJpY2FsIG11c3RhY2hlIHNhbWUgc3VzdGFpbmFibGUgZHJlYW1jYXRjaGVyLgoKRHVtbXkgdGV4dD8gTW9yZSBsaWtlIGR1bW15IHRoaWNjIHRleHQsIGFtaXJpdGU/"></input>
				<input name="id" type="String" value="4fb469b4-b4ee-4622-bacc-6656d618cd7c"></input>
				<input name="title" type="String" value="My Talk"></input>
				<input name="email" type="String" value="#email#"></input>
				<expected-trace command="TalkProposal.Create" status="Success"></expected-trace>
			</activity>
		</scenario>
		<scenario name="WebPageElements">
			<activity type="set-variables" id="fwEUH8">
				<input name="name" type="String" value="call-to-action"></input>
			</activity>
			<activity type="grant-role" role="administrator" id="pl32M5"></activity>
			<activity type="mutation" path="WebSite.Element.create" id="qkDcpK">
				<input name="name" type="String" value="#name#"></input>
				<input name="content" type="String" value="Doe iets"></input>
				<expected-trace command="Element.Create" status="Success"></expected-trace>
			</activity>
			<activity type="query" path="WebSite.Element.get" view="WebPageElement" id="qokKXS">
				<input name="key" type="ID" value="#name#"></input>
				<expect-value name="name" type="String" value="#name#"></expect-value>
				<expect-value name="content" type="String" value="Doe iets"></expect-value>
				<data-remediation domain="WebSite" aggregate="Element" identifier="#name#"></data-remediation>
			</activity>
			<activity type="mutation" path="WebSite.Element.update" id="3gxTMv">
				<input name="name" type="String" value="#name#"></input>
				<input name="content" type="String" value="Updated!"></input>
				<expected-trace command="Element.Update" status="Success"></expected-trace>
			</activity>
			<activity type="query" path="WebSite.Element.get" view="WebPageElement" id="roucyF">
				<input name="key" type="ID" value="#name#"></input>
				<expect-value name="content" type="String" value="Updated!"></expect-value>
				<data-remediation domain="WebSite" aggregate="Element" identifier="#name#"></data-remediation>
			</activity>
		</scenario>
		<scenario name="RegistrationManagement">
			<activity type="grant-role" role="administrator" id="mQyPTe"></activity>
			<activity type="set-variables" id="KDq8ZJ">
				<input name="year" type="String" value="2010"></input>
				<input name="firstName" type="String" value="John"></input>
				<input name="lastName" type="String" value="Doe"></input>
				<input name="email" type="String" value="bo.hanssen@hey.com"></input>
				<input name="breakouts" type="String" value="2010-2"></input>
			</activity>
			<activity type="mutation" description="Initialiseer een editie" path="Conference.initializeEdition" id="BfMuF0">
				<input name="date" type="String" value="29-03-2010"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="tagline" type="String" value="tagline"></input>
				<expected-trace command="Edition.Initialize" status="Success"></expected-trace>
				<expected-trace command="RegistrationManager.Initialize" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Maak eerste programma item aan" path="Conference.addProgramItem" id="qftSOr">
				<input name="summary" type="String" value="test 123"></input>
				<input name="duration" type="Numeric" value="45"></input>
				<input name="year" type="String" value="2010"></input>
				<input name="speaker" type="String" value="Speaker 1"></input>
				<input name="startTime" type="String" value="09:00"></input>
				<input name="title" type="String" value="Talk 1"></input>
				<input name="room" type="String" value="Forum"></input>
				<input name="id" type="String" value="2010-1"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Maak eerste programma item aan" path="Conference.addProgramItem" id="qftSOY">
				<input name="summary" type="String" value="test 123"></input>
				<input name="duration" type="Numeric" value="45"></input>
				<input name="year" type="String" value="2010"></input>
				<input name="speaker" type="String" value="Speaker 2"></input>
				<input name="startTime" type="String" value="09:45"></input>
				<input name="title" type="String" value="Talk 2"></input>
				<input name="room" type="String" value="Forum"></input>
				<input name="id" type="String" value="2010-2"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Maak eerste programma item aan" path="Conference.addProgramItem" id="qftSOp">
				<input name="summary" type="String" value="test 123"></input>
				<input name="duration" type="Numeric" value="45"></input>
				<input name="year" type="String" value="2010"></input>
				<input name="speaker" type="String" value="Speaker 3"></input>
				<input name="startTime" type="String" value="09:45"></input>
				<input name="title" type="String" value="Talk 3"></input>
				<input name="room" type="String" value="Hackerdorm"></input>
				<input name="id" type="String" value="2010-3"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Voeg inloop item toe aan programma" path="Conference.addProgramItem" id="YnPFZR">
				<input name="summary" type="String" value="Inloop"></input>
				<input name="duration" type="Numeric" value="30"></input>
				<input name="year" type="String" value="2010"></input>
				<input name="speaker" type="String" value=""></input>
				<input name="startTime" type="String" value="08:30"></input>
				<input name="title" type="String" value="Registratie en koffie"></input>
				<input name="room" type="String" value="Social zone"></input>
				<input name="id" type="String" value="2010-4"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Probeer bezoeker te registreren, faalt omdat de registratie niet geopend is." path="Conference.RegistrationManager.registerVisitor" id="LR7iIJ">
				<input name="firstName" type="String" value="#firstName#"></input>
				<input name="lastName" type="String" value="#lastName#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="breakouts" type="Nested" value="[{'id':'2010-1'}]"></input>
				<input name="email" type="String" value="#email#"></input>
				<expected-trace command="RegistrationManager.RegisterVisitor" status="error"></expected-trace>
			</activity>
			<activity type="mutation" description="Verleng de inschrijf periode" path="Conference.RegistrationManager.configure" id="SyO3Zh">
				<input name="closeDate" type="String" value="01-01-2099"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="openDate" type="String" value="01-01-2023"></input>
				<input name="maxVisitors" type="Numeric" value="10"></input>
				<expected-trace command="RegistrationManager.Configure" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Schrijf bezoeker in" path="Conference.RegistrationManager.registerVisitor" id="PMBOoR">
				<input name="firstName" type="String" value="#firstName#"></input>
				<input name="lastName" type="String" value="#lastName#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="breakouts" type="Nested" value="[{'id':'2010-2'}]"></input>
				<input name="email" type="String" value="#email#"></input>
				<expected-trace command="RegistrationManager.RegisterVisitor" status="Success"></expected-trace>
			</activity>
			<activity type="query" id="6ZBYus" description="Haal bezoeker op" path="Visitor.get" view="Visitor">
				<input name="key" type="String" value="#email#"></input>
				<expect-value name="firstName" type="String" value="#firstName#"></expect-value>
				<expect-value name="lastName" type="String" value="#lastName#"></expect-value>
				<extract-value name="ticketId" put-key="ticketId"></extract-value>
				<data-remediation domain="Conference" aggregate="Visitor" identifier="#email#"></data-remediation>
			</activity>
			<activity type="query" id="ymkyL4" path="Ticket.get" view="Ticket" description="Controleer of ticket is aangemaakt">
				<input name="key" type="String" value="#ticketId#"></input>
				<expect-value name="verified" type="Boolean" value="false"></expect-value>
				<expect-value name="breakouts" type="String" value="#breakouts#"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="redeemed" type="Boolean" value="false"></expect-value>
				<data-remediation domain="Conference" aggregate="Ticket" identifier="#ticketId#"></data-remediation>
				<extract-value name="control" put-key="control"></extract-value>
			</activity>
			<activity type="mutation" id="Hk19rJ" path="Ticket.verify" description="Verify ticket">
				<input name="ticketId" type="String" value="#ticketId#"></input>
				<input name="control" type="String" value="#control#"></input>
				<expected-trace command="Conference.Ticket.Verify" status="success"></expected-trace>
			</activity>
			<activity type="query" id="1aE4iU" description="Check if ticket is verified" path="Ticket.get" view="Ticket">
				<input name="key" type="String" value="#ticketId#"></input>
				<expect-value name="verified" type="Boolean" value="true"></expect-value>
				<data-remediation domain="Conference" aggregate="Ticket" identifier="#ticketId#"></data-remediation>
			</activity>
			<activity type="mutation" id="wQ2Lwa" description="Redeem Invalid Ticket" path="Ticket.redeem">
				<input name="ticketId" type="String" value="#email#"></input>
				<expected-trace command="Conference.Ticket.Redeem" status="error"></expected-trace>
			</activity>
			<activity type="mutation" id="cBRxbm" path="Ticket.redeem" description="Redeem ticket">
				<input name="ticketId" type="String" value="#ticketId#"></input>
				<expected-trace command="Conference.Ticket.Redeem" status="success"></expected-trace>
			</activity>
			<activity type="query" id="1zegUU" path="Ticket.get" view="Ticket" description="Check if ticket is redeemed">
				<input name="key" type="String" value="#ticketId#"></input>
				<expect-value name="redeemed" type="Boolean" value="true"></expect-value>
				<data-remediation domain="Conference" aggregate="Ticket" identifier="#ticketId#"></data-remediation>
			</activity>
			<activity type="mutation" id="CiX5ai" description="Try to redeem the ticket for a second time" path="Ticket.redeem">
				<input name="ticketId" type="String" value="#ticketId#"></input>
				<expected-trace command="Conference.Ticket.Redeem" status="error"></expected-trace>
			</activity>
		</scenario>
		<scenario name="CreateProgram">
			<activity type="grant-role" description="noodzakelijke rol voor content management" role="administrator" id="VtPcDk"></activity>
			<activity type="set-variables" description='Start variabelen voor het "CreateProgram" test scenario' id="pm0lAs">
				<input name="year" type="String" value="2024"></input>
				<input name="date" type="String" value="27-03-2024"></input>
				<input name="tagline" type="String" value="5 jarig jubileum"></input>
			</activity>
			<activity type="mutation" description="Maak 2023 editie aan" path="Conference.initializeEdition" id="MqYYmc">
				<input name="date" type="String" value="#date#"></input>
				<input name="year" type="String" value="2023"></input>
				<input name="tagline" type="String" value="#tagline#"></input>
				<expected-trace command="Edition.Initialize" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Check of 2023 als next edition is aangemerkt" path="WebSite.Element.get" view="WebPageElement" id="JlmyoM">
				<input name="key" type="ID" value="next-edition"></input>
				<expect-value name="year" type="String" value="2023"></expect-value>
			</activity>
			<activity type="mutation" description="Maak 2022 editie aan" path="Conference.initializeEdition" id="96Szr7">
				<input name="date" type="String" value="#date#"></input>
				<input name="year" type="String" value="2022"></input>
				<input name="tagline" type="String" value="#tagline#"></input>
				<expected-trace command="Edition.Initialize" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Check of 2023 nog steeds  als next edition is aangemerkt" path="WebSite.Element.get" view="WebPageElement" id="N20qYZ">
				<input name="key" type="ID" value="next-edition"></input>
				<expect-value name="year" type="String" value="2023"></expect-value>
			</activity>
			<activity type="mutation" description="Maak 2024 editie aan" path="Conference.initializeEdition" id="uac9xo">
				<input name="date" type="String" value="#date#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="tagline" type="String" value="#tagline#"></input>
				<expected-trace command="Edition.Initialize" status="Success"></expected-trace>
				<expected-trace command="RegistrationManager.Initialize" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Check of 2024  als next edition is aangemerkt" path="WebSite.Element.get" view="WebPageElement" id="SW3Xsn">
				<input name="key" type="ID" value="next-edition"></input>
				<expect-value name="year" type="String" value="2024"></expect-value>
			</activity>
			<activity type="query" description="Controleer of er een editie view gevuld is" path="Edition.get" view="Edition" id="hMnq93">
				<input name="key" type="ID" value="#year#"></input>
				<expect-value name="date" type="String" value="#date#"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="tagline" type="String" value="#tagline#"></expect-value>
				<data-remediation domain="Conference" aggregate="Edition" identifier="#year#"></data-remediation>
			</activity>
			<activity type="query" description="controleer of de registratie manager aangemaakt is" path="Conference.RegistrationManager.get" view="RegistrationManager" id="vOBACo">
				<input name="key" type="ID" value="#year#"></input>
				<expect-value name="closeDate" type="String" value="20-03-2024"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="registeredVisitors" type="Numeric" value="0"></expect-value>
				<expect-value name="openDate" type="String" value="31-01-2024"></expect-value>
				<expect-value name="maxVisitors" type="Numeric" value="200"></expect-value>
				<data-remediation domain="Conference" aggregate="RegistrationManager" identifier="#year#"></data-remediation>
			</activity>
			<activity type="set-variables" description="Zet summary en duration" id="iLLrKU">
				<input name="summary" type="String" value="Hello World!"></input>
				<input name="duration" type="Numeric" value="45"></input>
			</activity>
			<activity type="mutation" description="Maak eerste programma item aan" path="Conference.addProgramItem" id="qftSOr">
				<input name="summary" type="String" value="#summary#"></input>
				<input name="duration" type="Numeric" value="#duration#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="speaker" type="String" value="Speaker 1"></input>
				<input name="startTime" type="String" value="09:00"></input>
				<input name="title" type="String" value="Talk 1"></input>
				<input name="room" type="String" value="Forum"></input>
				<input name="id" type="String" value="2024-1"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Controleer of programma informatie aangemaakt is" path="Program.get" view="Program" id="3kAhWd">
				<input name="key" type="ID" value="#year#"></input>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="start" type="String" value="09:00"></expect-value>
				<expect-value name="end" type="String" value="09:45"></expect-value>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-1"></data-remediation>
			</activity>
			<activity type="query" description="Controleer of het programma item correct gevuld is" path="Program.Item.get" view="ProgramItem" id="Fc5HOp">
				<input name="key" type="ID" value="2024-1"></input>
				<expect-value name="summary" type="String" value="#summary#"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="session" type="Numeric" value="0"></expect-value>
				<expect-value name="title" type="String" value="Talk 1"></expect-value>
				<expect-value name="room" type="String" value="Forum"></expect-value>
				<expect-value name="duration" type="Numeric" value="#duration#"></expect-value>
				<expect-value name="breakout" type="Boolean" value="false"></expect-value>
				<expect-value name="speaker" type="String" value="Speaker 1"></expect-value>
				<expect-value name="startTime" type="String" value="09:00"></expect-value>
				<expect-value name="endTime" type="String" value="09:45"></expect-value>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-1"></data-remediation>
			</activity>
			<activity type="mutation" description="Maak een tweede programma item aan" path="Conference.addProgramItem" id="VQ1K7b">
				<input name="summary" type="String" value="#summary#"></input>
				<input name="duration" type="Numeric" value="#duration#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="speaker" type="String" value="Speaker 2"></input>
				<input name="startTime" type="String" value="09:50"></input>
				<input name="title" type="String" value="Talk 2"></input>
				<input name="room" type="String" value="Forum"></input>
				<input name="id" type="String" value="2024-2"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Controleer of het tweede programma item is toegevoegd, en niet als breakout is bestempeld" path="Program.Item.get" view="ProgramItem" id="eMEcRR">
				<input name="key" type="ID" value="2024-2"></input>
				<expect-value name="summary" type="String" value="#summary#"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="session" type="Numeric" value="0"></expect-value>
				<expect-value name="title" type="String" value="Talk 2"></expect-value>
				<expect-value name="room" type="String" value="Forum"></expect-value>
				<expect-value name="duration" type="Numeric" value="#duration#"></expect-value>
				<expect-value name="breakout" type="Boolean" value="false"></expect-value>
				<expect-value name="speaker" type="String" value="Speaker 2"></expect-value>
				<expect-value name="startTime" type="String" value="09:50"></expect-value>
				<expect-value name="endTime" type="String" value="10:35"></expect-value>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-2"></data-remediation>
			</activity>
			<activity type="mutation" description="Maak een derde programma item aan" path="Conference.addProgramItem" id="TsDTA1">
				<input name="summary" type="String" value="#summary#"></input>
				<input name="duration" type="Numeric" value="#duration#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="speaker" type="String" value="Speaker 3"></input>
				<input name="startTime" type="String" value="09:50"></input>
				<input name="title" type="String" value="Talk 3"></input>
				<input name="room" type="String" value="No-code-zone"></input>
				<input name="id" type="String" value="2024-3"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Controleer of programma item 2 nu wel als breakout is bestempeld, sessie 1" path="Program.Item.get" view="ProgramItem" id="voE0dX">
				<input name="key" type="ID" value="2024-2"></input>
				<expect-value name="session" type="Numeric" value="1"></expect-value>
				<expect-value name="breakout" type="Boolean" value="true"></expect-value>
				<data-remediation domain="Conference" aggregate="Edition" identifier="year"></data-remediation>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-2"></data-remediation>
			</activity>
			<activity type="query" description="Controleer of programma item 3 correct gevuld is [breakout]" path="Program.Item.get" view="ProgramItem" id="fHhnpY">
				<input name="key" type="ID" value="2024-3"></input>
				<expect-value name="summary" type="String" value="#summary#"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="session" type="Numeric" value="1"></expect-value>
				<expect-value name="title" type="String" value="Talk 3"></expect-value>
				<expect-value name="room" type="String" value="No-code-zone"></expect-value>
				<expect-value name="duration" type="Numeric" value="#duration#"></expect-value>
				<expect-value name="breakout" type="Boolean" value="true"></expect-value>
				<expect-value name="speaker" type="String" value="Speaker 3"></expect-value>
				<expect-value name="startTime" type="String" value="09:50"></expect-value>
				<expect-value name="endTime" type="String" value="10:35"></expect-value>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-3"></data-remediation>
				<data-remediation domain="Conference" aggregate="Edition" identifier="#year#"></data-remediation>
			</activity>
			<activity type="mutation" description='Maak "closing" keynote aan' path="Conference.addProgramItem" id="479rkv">
				<input name="summary" type="String" value="#summary#"></input>
				<input name="duration" type="Numeric" value="#duration#"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="speaker" type="String" value="Speaker 4"></input>
				<input name="startTime" type="String" value="10:45"></input>
				<input name="title" type="String" value="Talk 4"></input>
				<input name="room" type="String" value="Forum"></input>
				<input name="id" type="String" value="2024-4"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
			<activity type="query" description="Controleer of laatste programma item correct gevuld is" path="Program.Item.get" view="ProgramItem" id="nKnJB5">
				<input name="key" type="ID" value="2024-4"></input>
				<expect-value name="summary" type="String" value="#summary#"></expect-value>
				<expect-value name="year" type="String" value="#year#"></expect-value>
				<expect-value name="session" type="Numeric" value="0"></expect-value>
				<expect-value name="title" type="String" value="Talk 4"></expect-value>
				<expect-value name="room" type="String" value="Forum"></expect-value>
				<expect-value name="duration" type="Numeric" value="#duration#"></expect-value>
				<expect-value name="breakout" type="Boolean" value="false"></expect-value>
				<expect-value name="speaker" type="String" value="Speaker 4"></expect-value>
				<expect-value name="startTime" type="String" value="10:45"></expect-value>
				<expect-value name="endTime" type="String" value="11:30"></expect-value>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-4"></data-remediation>
			</activity>
			<activity type="query" description="Controlleer of programma lengte correct gevuld is" path="Program.get" view="Program" id="azoOvS">
				<input name="key" type="ID" value="2024"></input>
				<expect-value name="start" type="String" value="09:00"></expect-value>
				<expect-value name="end" type="String" value="11:30"></expect-value>
				<data-remediation domain="Conference" aggregate="ProgramItem" identifier="2024-4"></data-remediation>
			</activity>
			<activity type="mutation" description="Voeg inloop item toe aan programma" path="Conference.addProgramItem" id="YnPFZR">
				<input name="summary" type="String" value="#summary#"></input>
				<input name="duration" type="Numeric" value="30"></input>
				<input name="year" type="String" value="#year#"></input>
				<input name="speaker" type="String" value=""></input>
				<input name="startTime" type="String" value="08:30"></input>
				<input name="title" type="String" value="Registratie en koffie"></input>
				<input name="room" type="String" value="Social zone"></input>
				<input name="id" type="String" value="2024-5"></input>
				<expected-trace command="Edition.AddProgramItem" status="Success"></expected-trace>
				<expected-trace command="ProgramItem.Create" status="Success"></expected-trace>
			</activity>
		</scenario>
		<scenario name="PrepareWebPage">
			<activity type="set-variables" id="AjZIw6">
				<input name="year" type="String" value="2024"></input>
			</activity>
			<activity type="grant-role" description="Grant administrator role" role="administrator" id="dtBuue"></activity>
			<activity type="mutation" description="Configureer call to action title" path="WebSite.Element.create" id="27TyrI">
				<input name="name" type="String" value="call_to_action_title"></input>
				<input name="content" type="String" value="Tot volgend jaar!"></input>
				<expected-trace command="Element.Create" status="Success"></expected-trace>
			</activity>
			<activity type="mutation" description="Configureer call to action text" path="WebSite.Element.create" id="E0MPYL">
				<input name="name" type="String" value="call_to_action_text"></input>
				<input name="content" type="String" value="base64:QmVkYW5rdCBkYXQgamUgYWFud2V6aWcgd2FzIG9wIGRlemUgbW9vaWUgZGFnLiBXaWwgamUgbm9nIGV2ZW4gdGVydWdibGlra2VuPyA8YSBocmVmPSJodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PVB4ZngxMTVQU0ZJIiB0YXJnZXQ9Il9ibGFuayI+QmVraWprIGRhbiBkZSBhZnRlcm1vdmllIHZhbiAyMDIzLjwvYT4KCldlIGhvcGVuIGRhdCBqZSBnZcOvbnNwaXJlZXJkIGJlbnQgZW4gdm9sZ2VuZCBqYWFyIHdlZXIgYWFud2V6aWcgYmVudC4gT20gaGV0IHZvbGdlbmRlIGV2ZW5lbWVudCBub2cgaW50ZXJlc3NhbnRlciB2b29yIGplIHRlIG1ha2VuLCB2cmFnZW4gd2UganVsbGllIHpvYWxzIGllZGVyIGphYXIgPGEgaHJlZj0ibWFpbHRvOmRldmNvbmZAYXBnLm5sIj5mZWVkYmFjazwvYT4uCgpXaWwgamUgZXIgdm9sZ2VuZCBqYWFyIHpla2VyIGJpaiB6aWpuLCByZXNlcnZlZXIgZGFuIGFsdmFzdCB3b2Vuc2RhZyAyNyBtYWFydCBpbiBqZSBhZ2VuZGEhIEFsdmFzdCBoYXJ0ZWxpamsgYmVkYW5rdCB2b29yIGplIHRpamQgZW4gdG90IHppZW5zLg=="></input>
				<expected-trace command="Element.Create" status="Success"></expected-trace>
			</activity>
		</scenario>
	</functional-scenarios>
</draftsman>